# Axolotl Configuration for DeepAnalyze Cloud Data Sources Extension
# Full fine-tuning with Azure Blob Storage and PostgreSQL capabilities

# Base model
base_model: RUC-DataLab/DeepAnalyze-8B
model_type: qwen2
tokenizer_type: AutoTokenizer
trust_remote_code: true

# Sequence settings
sequence_len: 32768
sample_packing: true
pad_to_sequence_len: true
eval_sample_packing: false

# Flash Attention
flash_attention: true
flash_attention_2: true

# DeepSpeed (for multi-GPU)
deepspeed: deepspeed_configs/zero3.json

# Training hyperparameters
num_epochs: 3
micro_batch_size: 2
gradient_accumulation_steps: 4
learning_rate: 5e-6
lr_scheduler: cosine
warmup_ratio: 0.05

# Optimization
bf16: true
fp16: false
tf32: true
gradient_checkpointing: true
gradient_checkpointing_kwargs:
  use_reentrant: false

# Logging and saving
logging_steps: 1
save_steps: 50
eval_steps: 50
save_total_limit: 3
output_dir: ./outputs/deepanalyze_cloud

# Datasets
datasets:
  - path: training-data-example.json
    type: json
    field: messages

# Chat template
chat_template: qwen2

# Special tokens (already in model)
special_tokens:
  pad_token: <|endoftext|>
